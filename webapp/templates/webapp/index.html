<!DOCTYPE html>
<html>
<head>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'styles/style.css' %}" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="{% static 'jquery-3.3.1.min.js' %}" type="text/javascript"></script>
	<script src="{% static 'bootstrap.min.js' %}" type="text/javascript"></script>
</head>
<body>

<nav class="navbar">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href=""><i class="fa fa-paw" style="font-size:24px; padding-right: 10px;"></i>Risk Hunters</a>
    </div>
    <form class="navbar-form navbar-right">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search species">
        </div>
      </form>
  </div>
</nav>

<div class="container">

    <div class="row">

        <div class="col-lg-6">
          <img src="{% static 'images/red-panda.jpg' %}" alt="Red Panda" class="red-panda" style="width: 120%;"/>
        </div>

        <div class="col-lg-6">
            <div class="panel panel-success">

                <h1 class="name">{{name}} <span class="latin-name">({{latin_name}})</span></h1>

                <h4><i class="fa fa-info-circle status-icon" style="font-size:24px;"></i>Status:</h4><span class="current-status">{{ status }}</span>

                </br>
                {% load static %}
                <img src="{% static 'images/red-panda-icon.png' %}" alt="Red Panda" class="red-panda-icon"/>
                <img src="{% static 'images/red-panda-icon.png' %}" alt="Red Panda" class="red-panda-icon"/>
                <img src="{% static 'images/red-panda-icon.png' %}" alt="Red Panda" class="red-panda-icon"/>
                <img src="{% static 'images/red-panda-icon.png' %}" alt="Red Panda" class="red-panda-icon"/>
                <img src="{% static 'images/red-panda-icon.png' %}" alt="Red Panda" class="red-panda-icon"/>

                <h4><i class="fa fa-leaf status-icon" style="font-size:24px;"></i>Habitats:</h4>

                <ul>
                    {% load static %}
                    {% for h in habitats %}
                    <li>{{ h }}</li>
                    {% endfor %}
                </ul>

                <h4><i class="fa fa-history status-icon" style="font-size:24px;"></i>History of population:</h4>

                <p>Year: <span id="demo"></span></p>

                <div class="slidecontainer">
                  <input type="range" min="{{ minimalYear }}" max="2018" value="2018" class="slider" id="myRange">
                </div>

                <p style="padding-top: 10px;">Status: <span id="status">{{ status }}</span></p>

                {% load static %}
                <img src="{% static 'images/red-panda-icon.png' %}" alt="Red Panda" class="red-panda-icon-history"/>
                <img src="{% static 'images/red-panda-icon.png' %}" alt="Red Panda" class="red-panda-icon-history"/>
                <img src="{% static 'images/red-panda-icon.png' %}" alt="Red Panda" class="red-panda-icon-history"/>
                <img src="{% static 'images/red-panda-icon.png' %}" alt="Red Panda" class="red-panda-icon-history"/>
                <img src="{% static 'images/red-panda-icon.png' %}" alt="Red Panda" class="red-panda-icon-history"/>

                <h4><i class="fa fa-bolt status-icon" style="font-size:24px;"></i>Most severe threats:</h4>

                <ul>
                    {% load static %}
                    {% for t in threats %}
                    <li>{{t}}</li>
                    {% endfor %}
                </ul>


            </div>
        </div>

    </div>

    <div class="row">



    </div>

</div>

<script>

function recolor(numberOfColored, className) {
    var x = document.getElementsByClassName(className);
    var y = [];

    for (var j = 0; j < x.length; j++) {
        x[x.length-1-j].classList.remove("disappearing");
        y.push(x[x.length-1-j]);
    }

    for(var i = 0; i < numberOfColored; i++) {
        y[i].classList.add("disappearing");
    }
}

function switch2(x) {
    return {
        "Extinct": 0,
        "Extinct in the wild": 1,
        "Critically endangered": 2,
        'Endangered': 3,
        'Vulnerable': 4,
        "Near threatened": 5
    }[x]
}

recolor(parseInt("{{range}}"), "red-panda-icon-history");
recolor(parseInt("{{range}}"), "red-panda-icon");

var slider = document.getElementById("myRange");
var output = document.getElementById("demo");
output.innerHTML = slider.value;

slider.oninput = function() {
    output.innerHTML = this.value;
    var statuses = {{ statuses | safe }};
    var years = {{ history }};
    var chosen = 0;
    for (var i = 1; i < years.length; i++) {
        if (parseInt(this.value) < years[i]) {
            break;
        }
        chosen = i;
    }
    document.getElementById("status").innerHTML = statuses[years[chosen]];
    recolor(5-switch2(statuses[years[chosen]]), "red-panda-icon-history");
}
</script>

</body>
</html>